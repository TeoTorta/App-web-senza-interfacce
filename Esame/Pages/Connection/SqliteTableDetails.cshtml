@page
@model Esame.Pages.Connection.SqliteTableDetailsModel
@{
}

<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

<div style="margin-left:5%; margin-right:5%">
    <h1> Table Details : @Model.TableName </h1>
    <br />
    <hr />
    <br />
    <table class="table table-striped table-responsive">
        <tr>
            @if (ViewData["SqliteTable"] != null)
            {
                var dt = ViewData["SqliteTable"] as System.Data.DataTable;

                if(dt != null)
                {
                    <th style="width:50px; background-color:lightsteelblue">RowId</th>
                    foreach (System.Data.DataRow dr in dt.Rows)
                    {
                        
                        <th title="@dr[2]   @dr[3]   @dr[4]   @dr[5]">
                            @dr[1]  
                        </th>
                    }
                }
            }
        </tr>

        @if (ViewData["Dati"] != null)
        {
            var dt2 = ViewData["Dati"] as System.Data.DataTable;

            if(dt2 != null){

                var r = 0;
                foreach (System.Data.DataRow myRow in dt2.Rows)
                {
                    r++;
                    <tr>
                        <td style="background-color:lightsteelblue">@r</td>
                        @for (var i = 0; i < Model.Contatore; i++)
                        {
                            <td>
                                @myRow[i]
                            </td>
                        }
                    </tr>

                }
            
                if (r == 0)
                {
                    <tr>
                        <td style="background-color:lightsteelblue">0</td>
                        @for (var i = 0; i < Model.Contatore; i++)
                        {
                            <td></td>
                        }
                    </tr>
                }
            }
        }
    </table>

    <br />
    <br />
    <br />

    <table class="table table-striped table-responsive">

        @if (ViewData["Index"] != null)
        {
            var dt3 = ViewData["Index"] as System.Data.DataTable;

            if(dt3 != null){
                <tr>
                @foreach (System.Data.DataColumn col in dt3.Columns)
                {
                    <th>@col.ColumnName </th>
                }
                </tr>     
                
                foreach (System.Data.DataRow myRow1 in dt3.Rows)
                {
                   <tr>
                   <td>@myRow1[0] </td>
                   <td>@myRow1[1] </td>
                   <td>@myRow1[2] </td>
                   <td>@myRow1[3] </td>
                   <td>@myRow1[4] </td>
                   </tr>
                }
            }
        }
    </table>
</div>
